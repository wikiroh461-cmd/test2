<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>법령 예시 - 법령정보시스템</title>
<link rel="stylesheet" href="../style.css">
</head>
<body>
<header class="header">
  <div class="logo">법령정보시스템</div>
  <nav class="nav">
    <a href="../index.html">홈</a>
    <a href="#">법령</a>
    <a href="#">최근 업데이트</a>
  </nav>
</header>

<main class="law-detail">
  <div style="flex:1 1 auto;">
    <h1>법령 예시</h1>
    <p>시행일: 2025-01-01 | 제정: 2011-01-01</p>
    <div class="tab-buttons">
      <button id="contentTab" class="active">본문</button>
      <button id="historyTab">연혁</button>
      <button onclick="openPrint()">🖨️ 프린트</button>
    </div>

    <section id="contentArea">
      <article id="article1" class="law-article">
        <h3>제1조 (목적)</h3>
        <p>이 법령은 테스트 목적입니다.</p>
      </article>
      <article id="article2" class="law-article">
        <h3>제2조 (정의)</h3>
        <p>테스트 정의 내용</p>
      </article>
    </section>

    <section id="historyArea" style="display:none;">
      <ul class="history-list">
        <li data-content='
          <article><h3>제1조 (목적)</h3><p>2024-01-01 버전 내용</p></article>
          <article><h3>제2조 (정의)</h3><p>2024-01-01 정의 내용</p></article>
        '>2024-01-01 개정</li>
      </ul>
    </section>
  </div>

  <aside class="law-toc">
    <h2>조문 목차</h2>
    <ul id="toc">
      <li data-id="article1" class="active">제1조 (목적)</li>
      <li data-id="article2">제2조 (정의)</li>
    </ul>
  </aside>
</main>

<footer class="footer">
  <p>© 2025 법령정보시스템</p>
</footer>

<script>
const tocItems = document.querySelectorAll("#toc li");
const articles = document.querySelectorAll(".law-article");
const contentTab = document.getElementById("contentTab");
const historyTab = document.getElementById("historyTab");
const contentArea = document.getElementById("contentArea");
const historyArea = document.getElementById("historyArea");
const historyItems = document.querySelectorAll(".history-list li");

tocItems.forEach(item=>{
  item.addEventListener("click", ()=>{
    tocItems.forEach(i=>i.classList.remove("active"));
    item.classList.add("active");
    articles.forEach(a=>a.style.display = (a.id===item.dataset.id)?"block":"none");
  });
});

contentTab.addEventListener("click", ()=>{
  contentTab.classList.add("active");
  historyTab.classList.remove("active");
  contentArea.style.display = "block";
  historyArea.style.display = "none";
});
historyTab.addEventListener("click", ()=>{
  contentTab.classList.remove("active");
  historyTab.classList.add("active");
  contentArea.style.display = "none";
  historyArea.style.display = "block";
});

historyItems.forEach(item=>{
  item.addEventListener("click", ()=>{
    contentTab.click();
    contentArea.innerHTML = item.dataset.content;
    tocItems.forEach(i=>i.classList.remove("active"));
  });
});

function openPrint(){
  const printWindow = window.open('','_blank','width=800,height=900');
  const contentHTML = contentArea.style.display==="block"?contentArea.innerHTML:historyArea.innerHTML;
  printWindow.document.open();
  printWindow.document.write(`
    <html>
    <head>
      <title>출력 - 법령 예시</title>
      <link rel="stylesheet" href="../print.css">
    </head>
    <body>
      <div class="print-container">${contentHTML}</div>
      <script>
        window.onload=function(){window.print(); window.close();};
      <\/script>
    </body>
    </html>
  `);
  printWindow.document.close();
}
</script>
</body>
</html>
